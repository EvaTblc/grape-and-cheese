<div class="top-page-design"></div>

<div class="header-show">
  <% if @wine.photo.attached? %>
    <%= cl_image_tag @wine.photo.key %>
  <% else %>
    <%= image_tag "default-wine.jpg" %>
  <% end %>
  <h2 class="header-show-title">
    <%= @wine.name %>
  </h2>
    <p><em>Cuvée <%= @wine.year %></em></p>
</div>

<div class="container-show">
  <div
  data-controller="tabs"
  data-tabs-active-class="active"
  data-tabs-default-tab-value="tab1">

  <div class="flex nav-show">
    <button id="tab1" data-tabs-target="btn" data-action="click->tabs#select">Infos</button>
    <button id="tab2" data-tabs-target="btn" data-action="click->tabs#select">Avis</button>
    <button id="tab3" data-tabs-target="btn" data-action="click->tabs#select">Plus</button>
  </div>

  <div class="rounded-lg categories">
    <div data-tabs-target="tab" id="tab1">
      🌍 <%= @wine.vignoble %> <br>
      🍷 <%= @wine.color %> <br>
      💸 <%= @wine.price %>€<br>
      🌡️ <%= @wine.alcool_degree %>° <br>
    </div>

    <div data-tabs-target="tab" id="tab2" class='hidden'>
      <%= button_to "Ajouter un avis", root_path %>
      <% @ratings.each do |rating| %>
        <div class="card-trip-infos">
          <p><%= rating.description %></p>
          <h2 class="card-trip-pricing"><%= rating.evaluation %></h2>
          <%= cl_image_tag rating.user.avatar.key, class: "card-trip-user avatar-bordered" %>
        </div>
      <% end %>
    </div>

    <div data-tabs-target="tab" id="tab3" class='hidden'>
      <% if @gifts.any? %>
        <% @gifts.each do |gift| %>
          <%= gift.found_on %>
        <% end %>
      <% else %>
        <p>Vous n'avez pas ce vin dans votre cave</p>
      <% end %>
    </div>

  </div>
</div>
</div>
